{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\r\nimport 'flatpickr/dist/flatpickr.min.css';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst inputDateTimePicker = document.getElementById('datetime-picker');\r\nconst btnStart = document.querySelector('[data-start]');\r\nconst timerFields = document.querySelectorAll('.timer .value');\r\n\r\nlet userSelectedDate = null;\r\nlet countdownInterval = null;\r\n\r\nconst options = {\r\n  enableTime: true,\r\n  time_24hr: true,\r\n  defaultDate: new Date(),\r\n  minuteIncrement: 1,\r\n  onClose(selectedDates) {\r\n    userSelectedDate = selectedDates[0];\r\n    checkValidData();\r\n  },\r\n};\r\nflatpickr(inputDateTimePicker, options);\r\n\r\nfunction checkValidData() {\r\n  if (!userSelectedDate || userSelectedDate <= new Date()) {\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: 'Please choose a date in the future',\r\n      position: 'topRight',\r\n    });\r\n    btnStart.disabled = true;\r\n  } else {\r\n    btnStart.disabled = false;\r\n    iziToast.success({\r\n      title: 'Success',\r\n      message: 'Correct date',\r\n      position: 'topRight',\r\n    });\r\n  }\r\n}\r\n\r\nfunction addLeadingZero(value) {\r\n  return value < 10 ? '0' + value : value;\r\n}\r\n\r\nfunction updateTimer() {\r\n  const now = new Date();\r\n  const msDifference = userSelectedDate - now;\r\n  if (msDifference <= 0) {\r\n    clearInterval(countdownInterval);\r\n\r\n    timerFields.forEach(field => (field.textContent = '00'));\r\n    return;\r\n  }\r\n\r\n  const { days, hours, minutes, seconds } = convertMs(msDifference);\r\n  timerFields[0].textContent = addLeadingZero(days);\r\n  timerFields[1].textContent = addLeadingZero(hours);\r\n  timerFields[2].textContent = addLeadingZero(minutes);\r\n  timerFields[3].textContent = addLeadingZero(seconds);\r\n}\r\n\r\nbtnStart.addEventListener('click', e => {\r\n  btnStart.disabled = true;\r\n  inputDateTimePicker.disabled = true;\r\n  updateTimer();\r\n  countdownInterval = setInterval(updateTimer, 1000);\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  btnStart.disabled = true;\r\n});\r\n\r\nfunction convertMs(ms) {\r\n  // Number of milliseconds per unit of time\r\n  const second = 1000;\r\n  const minute = second * 60;\r\n  const hour = minute * 60;\r\n  const day = hour * 24;\r\n\r\n  // Remaining days\r\n  const days = Math.floor(ms / day);\r\n  // Remaining hours\r\n  const hours = Math.floor((ms % day) / hour);\r\n  // Remaining minutes\r\n  const minutes = Math.floor(((ms % day) % hour) / minute);\r\n  // Remaining seconds\r\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n\r\n  return { days, hours, minutes, seconds };\r\n}"],"names":["inputDateTimePicker","btnStart","timerFields","userSelectedDate","countdownInterval","options","selectedDates","checkValidData","flatpickr","iziToast","addLeadingZero","value","updateTimer","msDifference","field","days","hours","minutes","seconds","convertMs","e","ms"],"mappings":"2GAKA,MAAMA,EAAsB,SAAS,eAAe,iBAAiB,EAC/DC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAc,SAAS,iBAAiB,eAAe,EAE7D,IAAIC,EAAmB,KACnBC,EAAoB,KAExB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAmBG,EAAc,CAAC,EAClCC,GACD,CACH,EACAC,EAAUR,EAAqBK,CAAO,EAEtC,SAASE,GAAiB,CACpB,CAACJ,GAAoBA,GAAoB,IAAI,MAC/CM,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,UAChB,CAAK,EACDR,EAAS,SAAW,KAEpBA,EAAS,SAAW,GACpBQ,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,eACT,SAAU,UAChB,CAAK,EAEL,CAEA,SAASC,EAAeC,EAAO,CAC7B,OAAOA,EAAQ,GAAK,IAAMA,EAAQA,CACpC,CAEA,SAASC,GAAc,CAErB,MAAMC,EAAeV,EADT,IAAI,KAEhB,GAAIU,GAAgB,EAAG,CACrB,cAAcT,CAAiB,EAE/BF,EAAY,QAAQY,GAAUA,EAAM,YAAc,IAAK,EACvD,MACD,CAED,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUN,CAAY,EAChEX,EAAY,CAAC,EAAE,YAAcQ,EAAeK,CAAI,EAChDb,EAAY,CAAC,EAAE,YAAcQ,EAAeM,CAAK,EACjDd,EAAY,CAAC,EAAE,YAAcQ,EAAeO,CAAO,EACnDf,EAAY,CAAC,EAAE,YAAcQ,EAAeQ,CAAO,CACrD,CAEAjB,EAAS,iBAAiB,QAASmB,GAAK,CACtCnB,EAAS,SAAW,GACpBD,EAAoB,SAAW,GAC/BY,IACAR,EAAoB,YAAYQ,EAAa,GAAI,CACnD,CAAC,EAED,SAAS,iBAAiB,mBAAoB,UAAY,CACxDX,EAAS,SAAW,EACtB,CAAC,EAED,SAASkB,EAAUE,EAAI,CAQrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}